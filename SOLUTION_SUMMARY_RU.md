# üìù –†–µ–∑—é–º–µ: –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ñ–æ—Ç–æ –Ω–∞ –ø—Ä–æ–¥–µ

## –ü—Ä–æ–±–ª–µ–º–∞
**–°–∏–º–ø—Ç–æ–º:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–æ—Ç–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ (TimeWeb Cloud), —Ö–æ—Ç—è –ª–æ–∫–∞–ª—å–Ω–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è `GEMINI_API_KEY`, –∫–æ—Ç–æ—Ä–∞—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ Gemini API.

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
Health endpoint –ø–æ–∫–∞–∑—ã–≤–∞–ª:
```json
{
  "initialized": true,
  "bot_is_none": false,
  "dp_is_none": false,
  "import_error": null,
  "env_vars": {
    "TELEGRAM_BOT_TOKEN": "set",
    "OPENAI_API_KEY": "set",
    "WEBAPP_URL": "https://giottobright-webapp-cd8e.twc1.net/",
    "WEBHOOK_URL_env": "not set in env",
    "WEBHOOK_URL_actual": "https://giottobright-back-3800.twc1.net/webhook",
    "DATABASE_PATH": "data/app.db"
  }
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:** `GEMINI_API_KEY` –≤–æ–æ–±—â–µ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–ª—Å—è!

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
Debug endpoint (`/debug`) —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
```json
{
  "env_vars": {
    "TELEGRAM_BOT_TOKEN": "set",
    "OPENAI_API_KEY": "set",
    "GEMINI_API_KEY": "set" –∏–ª–∏ "NOT SET - REQUIRED FOR IMAGE GENERATION",
    "FLUX_API_KEY": "set" –∏–ª–∏ "not set (optional)",
    "FLUX_API_URL": "https://..." –∏–ª–∏ "not set (will use default)"
  }
}
```

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –û–±–Ω–æ–≤–ª–µ–Ω debug endpoint (`back/start.py`)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `GEMINI_API_KEY`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `FLUX_API_KEY`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `FLUX_API_URL`
- ‚úÖ –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ –∫–∞–∂–¥–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–µ–ø–ª–æ—è (`back/DEPLOY_TIMEWEB.md`)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `GEMINI_API_KEY` –≤ —Å–ø–∏—Å–æ–∫ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –≤–∞–∂–Ω–æ—Å—Ç–∏ —ç—Ç–æ–≥–æ –∫–ª—é—á–∞
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã Docker –∫–æ–º–∞–Ω–¥

### 3. –û–±–Ω–æ–≤–ª–µ–Ω docker-compose.yml
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `GEMINI_API_KEY` –≤ —Å–µ–∫—Ü–∏—é environment

### 4. –°–æ–∑–¥–∞–Ω—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é
- ‚úÖ **FIX_IMAGE_GENERATION.md** - –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º
- ‚úÖ **QUICK_FIX_IMAGE_GENERATION_RU.md** - –±—ã—Å—Ç—Ä–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º

## –†–µ—à–µ–Ω–∏–µ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å TimeWeb (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ https://timeweb.cloud/
2. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ `giottobright-back-3800`
3. Settings ‚Üí Environment Variables
4. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é:
   - **–ò–º—è:** `GEMINI_API_KEY`
   - **–ó–Ω–∞—á–µ–Ω–∏–µ:** `AIzaSyApvDQafuIxHcAyBc5FVy_vbP8KuRNQJhc`
5. Save ‚Üí Restart
6. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 30-60 —Å–µ–∫—É–Ω–¥
7. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ: `https://giottobright-back-3800.twc1.net/debug`

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ .env —Ñ–∞–π–ª –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–µ—Å–ª–∏ –µ—Å—Ç—å SSH –¥–æ—Å—Ç—É–ø)

```bash
# SSH –Ω–∞ —Å–µ—Ä–≤–µ—Ä
ssh your-server

# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
cd /path/to/app

# –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –≤ .env
echo "GEMINI_API_KEY=AIzaSyApvDQafuIxHcAyBc5FVy_vbP8KuRNQJhc" >> .env

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ
docker-compose restart
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ debug endpoint
```
https://giottobright-back-3800.twc1.net/debug
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```json
{
  "env_vars": {
    "GEMINI_API_KEY": "set"
  }
}
```

### 2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –±–æ—Ç–∞
1. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
3. –ó–∞–ø—Ä–æ—Å–∏—Ç–µ —Å–µ–ª—Ñ–∏
4. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å!

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–î–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ —Ç–∞–∫–∂–µ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:

```
FLUX_API_KEY=01483a08-56ae-494b-bbd1-20daf4cad819
FLUX_API_URL=https://api.bfl.ai/v1/flux-pro-1.1-ultra
```

## –ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–ª–æ –ª–æ–∫–∞–ª—å–Ω–æ?

–õ–æ–∫–∞–ª—å–Ω–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞–ª–∏—Å—å –∏–∑ —Ñ–∞–π–ª–∞ `back/keys.env`:
```env
GEMINI_API_KEY=AIzaSyApvDQafuIxHcAyBc5FVy_vbP8KuRNQJhc
```

–ù–∞ –ø—Ä–æ–¥–µ (TimeWeb Cloud) –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑:
- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è ‚Üí Environment Variables
- .env —Ñ–∞–π–ª –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- docker-compose.yml environment —Å–µ–∫—Ü–∏—é

## –§–∞–π–ª—ã –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏

- **–ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ:** `QUICK_FIX_IMAGE_GENERATION_RU.md`
- **–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** `FIX_IMAGE_GENERATION.md`
- **–î–µ–ø–ª–æ–π:** `back/DEPLOY_TIMEWEB.md`
- **–ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:** `back/keys.example.env`

## –ß–µ–∫-–ª–∏—Å—Ç

- [ ] –û—Ç–∫—Ä—ã—Ç–∞ –ø–∞–Ω–µ–ª—å TimeWeb Cloud
- [ ] –ù–∞–π–¥–µ–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ giottobright-back-3800
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è GEMINI_API_KEY
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω–æ
- [ ] Debug endpoint –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "set"
- [ ] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–æ—Ç–æ –≤ –±–æ—Ç–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∏ —Ä–µ—à–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –î–æ–±–∞–≤–∏—Ç—å `GEMINI_API_KEY` –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ TimeWeb Cloud

