# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞ TimeWeb Cloud

## –ü—Ä–æ–±–ª–µ–º–∞
–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–æ—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø—Ä–æ–¥–µ, –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è API –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ endpoint `/debug` –∏–ª–∏ `/health` –≤–∞—à–µ–≥–æ –±—ç–∫–µ–Ω–¥–∞:
```
https://giottobright-back-3800.twc1.net/debug
```

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ:
```json
{
  "env_vars": {
    "GEMINI_API_KEY": "NOT SET - REQUIRED FOR IMAGE GENERATION"
  }
}
```

–ó–Ω–∞—á–∏—Ç –ø—Ä–æ–±–ª–µ–º–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞.

## –†–µ—à–µ–Ω–∏–µ

### –®–∞–≥ 1: –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–∏ API –∫–ª—é—á–∏
–í —Ñ–∞–π–ª–µ `back/keys.env` (–ª–æ–∫–∞–ª—å–Ω–æ) –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤–∞—à–∏ –∫–ª—é—á–∏:
- `GEMINI_API_KEY` - **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û** –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- `FLUX_API_KEY` - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (–¥–ª—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏)
- `FLUX_API_URL` - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (–¥–ª—è Flux API)

### –®–∞–≥ 2: –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ TimeWeb Cloud

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å TimeWeb
1. –ó–∞–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è TimeWeb Cloud
2. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (giottobright-back)
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **"–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è"** –∏–ª–∏ **"Settings"** ‚Üí **"Environment Variables"**
4. –î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```
GEMINI_API_KEY=AIzaSyApvDQafuIxHcAyBc5FVy_vbP8KuRNQJhc
FLUX_API_KEY=01483a08-56ae-494b-bbd1-20daf4cad819
FLUX_API_URL=https://api.bfl.ai/v1/flux-pro-1.1-ultra
```

5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
6. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–æ–±—ã—á–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

#### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ docker-compose.yml (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Docker)
–î–æ–±–∞–≤—å—Ç–µ –≤ —Å–µ–∫—Ü–∏—é `environment` –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞:

```yaml
services:
  bot:
    environment:
      - TELEGRAM_BOT_TOKEN=${TELEGRAM_BOT_TOKEN}
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - GEMINI_API_KEY=${GEMINI_API_KEY}  # ‚Üê –î–æ–±–∞–≤—å—Ç–µ —ç—Ç—É —Å—Ç—Ä–æ–∫—É
      - FLUX_API_KEY=${FLUX_API_KEY}      # ‚Üê –ò —ç—Ç—É (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
      - FLUX_API_URL=${FLUX_API_URL}      # ‚Üê –ò —ç—Ç—É (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
      - WEBAPP_URL=${WEBAPP_URL}
      - DATABASE_PATH=data/app.db
```

#### –í–∞—Ä–∏–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ —Ñ–∞–π–ª .env –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
–ï—Å–ª–∏ TimeWeb –∏—Å–ø–æ–ª—å–∑—É–µ—Ç .env —Ñ–∞–π–ª—ã, —Å–æ–∑–¥–∞–π—Ç–µ/–æ–±–Ω–æ–≤–∏—Ç–µ `.env` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
# SSH –≤ –≤–∞—à —Å–µ—Ä–≤–µ—Ä
ssh your-server

# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
cd /path/to/your/app

# –°–æ–∑–¥–∞–π—Ç–µ/–æ–±–Ω–æ–≤–∏—Ç–µ .env —Ñ–∞–π–ª
nano .env

# –î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫–∏:
GEMINI_API_KEY=AIzaSyApvDQafuIxHcAyBc5FVy_vbP8KuRNQJhc
FLUX_API_KEY=01483a08-56ae-494b-bbd1-20daf4cad819
FLUX_API_URL=https://api.bfl.ai/v1/flux-pro-1.1-ultra

# –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ (Ctrl+O, Enter, Ctrl+X)

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
docker-compose restart
# –∏–ª–∏
systemctl restart your-app-name
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

1. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 30-60 —Å–µ–∫—É–Ω–¥ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
2. –û—Ç–∫—Ä–æ–π—Ç–µ `/debug` endpoint —Å–Ω–æ–≤–∞:
   ```
   https://giottobright-back-3800.twc1.net/debug
   ```

3. –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
   ```json
   {
     "env_vars": {
       "GEMINI_API_KEY": "set",
       "FLUX_API_KEY": "set"
     }
   }
   ```

4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Ñ–æ—Ç–æ –≤ –±–æ—Ç–µ

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Flux –≤–º–µ—Å—Ç–æ Gemini

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ `FLUX_API_KEY`, –º–æ–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Flux –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏. –î–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å –∫–æ–¥ –≤ `back/app/main.py`.

## –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

‚ö†Ô∏è **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: 
- –ù–ï –∫–æ–º–º–∏—Ç—å—Ç–µ API –∫–ª—é—á–∏ –≤ Git
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- –†–µ–≥—É–ª—è—Ä–Ω–æ –º–µ–Ω—è–π—Ç–µ –∫–ª—é—á–∏

üìù **API –ª–∏–º–∏—Ç—ã**:
- Gemini API –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –∫–≤–æ—Ç—ã/–ª–∏–º–∏—Ç—ã
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å Google Cloud –¥–ª—è –ª–∏–º–∏—Ç–æ–≤: https://console.cloud.google.com/
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ API –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω –≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ

## –õ–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–µ—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

```bash
# –õ–æ–≥–∏ Docker (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
docker-compose logs -f bot

# –ò–ª–∏ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏
journalctl -u your-app-name -f
```

–ò—â–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏:
```
‚ùå Gemini service –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –∏–ª–∏ –Ω–µ—Ç API –∫–ª—é—á–∞
‚ö†Ô∏è GEMINI_API_KEY –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
```

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Gemini API: https://ai.google.dev/
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Flux API: https://docs.bfl.ml/



