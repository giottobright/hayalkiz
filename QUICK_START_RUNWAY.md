# üöÄ –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢: Runway Gen-4 Turbo

## ‚úÖ –í—Å—ë –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏ –≥–æ—Ç–æ–≤–æ!

–í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã. API Runway Gen-4 Turbo –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω.

---

## üìã –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. **–§–æ—Ä–º–∞—Ç ratio**
   - ‚ùå –ë—ã–ª–æ: `"ratio": "9:16"` (aspect ratio - –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)
   - ‚úÖ –°—Ç–∞–ª–æ: `"ratio": "720:1280"` (—Ç–æ—á–Ω—ã–µ –ø–∏–∫—Å–µ–ª–∏ - —Ä–∞–±–æ—Ç–∞–µ—Ç!)

### 2. **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è**
   - ‚úÖ `model`: `"gen4_turbo"`
   - ‚úÖ `promptImage`: base64 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!)
   - ‚úÖ `ratio`: `"720:1280"` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!)

### 3. **–£–¥–∞–ª–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ –ø–æ–ª—è**
   - ‚ùå –£–±—Ä–∞–Ω–æ: `"seed": null` (–≤—ã–∑—ã–≤–∞–ª–æ –æ—à–∏–±–∫—É)

---

## üöÄ –ó–∞–ø—É—Å–∫

### 1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ API –∫–ª—é—á –Ω–∞—Å—Ç—Ä–æ–µ–Ω

–û—Ç–∫—Ä–æ–π—Ç–µ `back/keys.env` –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```bash
RUNWAY_API_KEY=–≤–∞—à_–∫–ª—é—á_–∑–¥–µ—Å—å
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞

```bash
cd back
python start.py
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:

```
üîë API Keys Status:
   ‚úÖ OpenAI API key: found
   ‚úÖ Google API key: found
   ‚úÖ Telegram token: found
   ‚úÖ Runway API key: found

üé¨ Sora service initialized successfully
ü§ñ Gemini service initialized successfully
```

---

## üé• –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –≤–∏–¥–µ–æ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Å–µ–ª—Ñ–∏

1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É: **"–°–µ–ª—Ñ–∏"** –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"üì∏ –°–µ–ª—Ñ–∏"**
2. –î–æ–∂–¥–∏—Ç–µ—Å—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–µ–ª—Ñ–∏
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"üé¨ –í–∏–¥–µ–æ"**
4. –í—ã–±–µ—Ä–∏—Ç–µ **"–ò–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–µ–ª—Ñ–∏"**
5. –ñ–¥–∏—Ç–µ 1-2 –º–∏–Ω—É—Ç—ã

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ù–æ–≤–æ–µ –≤–∏–¥–µ–æ —Å –Ω—É–ª—è

1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"üé¨ –í–∏–¥–µ–æ"**
2. –í—ã–±–µ—Ä–∏—Ç–µ **"–ù–æ–≤–æ–µ –≤–∏–¥–µ–æ"**
3. –ñ–¥–∏—Ç–µ 2-3 –º–∏–Ω—É—Ç—ã (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ–ª—Ñ–∏ + –≤–∏–¥–µ–æ)

---

## üìä –ß—Ç–æ –≤—ã —É–≤–∏–¥–∏—Ç–µ

### –í –ª–æ–≥–∞—Ö (—É—Å–ø–µ—à–Ω–æ):

```
üé¨ Starting Runway Gen-4 Turbo video generation...
   Model: gen4_turbo, Size: 720x1280, Duration: 5s
   Original prompt length: 856 chars
   Image input: from bytes (245.3KB, image-to-video mode)
[Runway] Request payload: {"model":"gen4_turbo","promptImage":"<base64_data>","promptText":"...","duration":5,"ratio":"720:1280"}
[Runway] Response keys: ['id']
[Runway] Got task ID: d8b03508-a8a3-4590-ae09-788f16c4c6a3
[Runway] Poll 1/120: status=processing, progress=15%
[Runway] Poll 3/120: status=processing, progress=45%
[Runway] Poll 5/120: status=processing, progress=78%
[Runway] Poll 7/120: status=succeeded, progress=100%
‚úÖ Video downloaded: 4567823 bytes
‚úÖ –í–∏–¥–µ–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ: 4567823 –±–∞–π—Ç
```

### –í Telegram (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–≤–∏–¥–∏—Ç):

```
üé¨ –ì–µ–Ω–µ—Ä–∏—Ä—É—é –≤–∏–¥–µ–æ... (5 —Å–µ–∫—É–Ω–¥, –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 1-2 –º–∏–Ω—É—Ç—ã)

‚è≥ –í–∏–¥–µ–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è... (–æ—Å—Ç–∞–ª–æ—Å—å ~90 —Å–µ–∫)

‚è≥ –ü–æ—á—Ç–∏ –≥–æ—Ç–æ–≤–æ... (–æ—Å—Ç–∞–ª–æ—Å—å ~30 —Å–µ–∫)

–í–æ—Ç –º–æ—ë –≤–∏–¥–µ–æ! üé•üíï
[–≤–∏–¥–µ–æ —Ñ–∞–π–ª –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω]
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–æ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞:

```bash
cd back
python test_runway_final.py
```

–í—ã —É–≤–∏–¥–∏—Ç–µ:
```
‚úÖ –ù–∞–π–¥–µ–Ω —Ä–∞–±–æ—á–∏–π —Ñ–æ—Ä–º–∞—Ç! –°–º–æ—Ç—Ä–∏—Ç–µ '‚úÖ SUCCESS' –≤—ã—à–µ.
Test 1: ratio='720:1280'                 ‚úÖ –†–ê–ë–û–¢–ê–ï–¢
Test 2: duration=10                      ‚úÖ –†–ê–ë–û–¢–ê–ï–¢
Test 3: ratio='1280:720'                 ‚úÖ –†–ê–ë–û–¢–ê–ï–¢
Test 4: Minimal                          ‚úÖ –†–ê–ë–û–¢–ê–ï–¢
Test 5: With seed                        ‚úÖ –†–ê–ë–û–¢–ê–ï–¢
Test 6: With watermark                   ‚úÖ –†–ê–ë–û–¢–ê–ï–¢
```

---

## ‚öôÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:

- **–ú–æ–¥–µ–ª—å**: `gen4_turbo` (Runway Gen-4 Turbo)
- **–†–∞–∑–º–µ—Ä**: `720x1280` (–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ HD –≤–∏–¥–µ–æ)
- **–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: 5 —Å–µ–∫—É–Ω–¥ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- **–§–æ—Ä–º–∞—Ç ratio**: `720:1280` (—Ç–æ—á–Ω—ã–µ –ø–∏–∫—Å–µ–ª–∏!)
- **–†–µ–∂–∏–º**: Image-to-video (–≤—Å–µ–≥–¥–∞ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –î–æ–ø—É—Å—Ç–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è |
|----------|---------------------|
| `duration` | 5, 10 —Å–µ–∫—É–Ω–¥ |
| `ratio` | `720:1280`, `1280:720`, `1104:832`, `832:1104`, `960:960`, `1584:672` |
| `model` | `gen4_turbo`, `gen4`, –∏ –¥—Ä—É–≥–∏–µ |

---

## üéØ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. "Runway API key not found"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –î–æ–±–∞–≤—å—Ç–µ –≤ back/keys.env
RUNWAY_API_KEY=–≤–∞—à_–∫–ª—é—á
```

### 2. "Validation of body failed"

**–ü—Ä–∏—á–∏–Ω–∞:** –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –∫–æ–¥–∞.

**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º `ratio: "720:1280"`.

### 3. "promptImage required"

**–ü—Ä–∏—á–∏–Ω–∞:** API —Ç—Ä–µ–±—É–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (—ç—Ç–æ image-to-video).

**–†–µ—à–µ–Ω–∏–µ:** –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ - –∫–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥–∞—ë—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ. –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ —ç—Ç—É –æ—à–∏–±–∫—É, –∑–Ω–∞—á–∏—Ç —á—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫ —Å –ø–µ—Ä–µ–¥–∞—á–µ–π `image_bytes`.

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- **–ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π**: —Å–º. `RUNWAY_FIX_RATIO.md`
- **–ò—Å—Ç–æ—Ä–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏**: —Å–º. `RUNWAY_MIGRATION.md`
- **–í—Å–µ —Ç–µ—Å—Ç—ã**: `back/test_runway_final.py`

---

## üéâ –ì–æ—Ç–æ–≤–æ –∫ –∑–∞–ø—É—Å–∫—É!

–í—Å—ë –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ. –ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ:

```bash
cd back
python start.py
```

–ò –Ω–∞—á–∏–Ω–∞–π—Ç–µ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –≤–∏–¥–µ–æ! üöÄ‚ú®

---

**–í–µ—Ä—Å–∏—è**: 3.0.3  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∏–π  
**–î–∞—Ç–∞**: 2025-10-10  
**–ú–æ–¥–µ–ª—å**: Runway Gen-4 Turbo  
**API**: https://api.dev.runwayml.com/v1/image_to_video