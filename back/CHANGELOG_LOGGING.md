# üìù Changelog - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

## –î–∞—Ç–∞: 30 —Å–µ–Ω—Ç—è–±—Ä—è 2025

### üéØ –¶–µ–ª—å
–î–æ–±–∞–≤–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º —Å Telegram –±–æ—Ç–æ–º –Ω–∞ Timeweb.Cloud

### ‚ú® –ò–∑–º–µ–Ω–µ–Ω–∏—è

#### 1. `start.py` - –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –∑–∞–ø—É—Å–∫–∞
**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- –ü–æ–ª–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞ –∏ health-—Å–µ—Ä–≤–µ—Ä–∞
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ —Å –ø–æ–ª–Ω—ã–º stack trace
- –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç, –∫–∞–∫–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∑–∞–ø—É—Å—Ç–∏–ª—Å—è, –∞ –∫–∞–∫–æ–π —É–ø–∞–ª

**–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:**
- –ï—Å–ª–∏ –±–æ—Ç –ø–∞–¥–∞–µ—Ç, health-—Å–µ—Ä–≤–µ—Ä –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å (–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Å—Ç–∞–µ—Ç—Å—è "–≤ —Å–µ—Ç–∏")
- –í—Å–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å `exc_info=True` –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ stack trace

#### 2. `app/main.py` - –õ–æ–≥–∏–∫–∞ Telegram –±–æ—Ç–∞
**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π:
  - `/start` –∫–æ–º–∞–Ω–¥–∞
  - –í—ã–±–æ—Ä –ø–µ—Ä—Å–æ–Ω—ã (inline + WebApp)
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ–ª—Ñ–∏
  - –û—Ç–≤–µ—Ç—ã GPT
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –±–æ—Ç–∞
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ polling –∏ –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

**–§–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤:**
- üë§ - –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- üíÉ - –≤—ã–±–æ—Ä –ø–µ—Ä—Å–æ–Ω—ã
- üí¨ - —Å–æ–æ–±—â–µ–Ω–∏—è
- üß† - GPT –æ–ø–µ—Ä–∞—Ü–∏–∏
- üì∏ - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ - —É—Å–ø–µ—à–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- ‚ùå - –æ—à–∏–±–∫–∏
- ‚ö†Ô∏è - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

#### 3. `app/config.py` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, –µ—Å–ª–∏ `keys.env` –Ω–µ –Ω–∞–π–¥–µ–Ω

### üìä –ß—Ç–æ —Ç–µ–ø–µ—Ä—å –≤–∏–¥–Ω–æ –≤ –ª–æ–≥–∞—Ö

#### –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ:
1. –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –∏ API –∫–ª—é—á–µ–π
3. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
4. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Telegram API
5. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ (username, ID)
6. –°—Ç–∞—Ä—Ç polling
7. –°—Ç–∞—Ä—Ç health-—Å–µ—Ä–≤–µ—Ä–∞

#### –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ:
1. –ö–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. ID –∏ username –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. –ö–∞–∫–∞—è –ø–µ—Ä—Å–æ–Ω–∞ –≤—ã–±—Ä–∞–Ω–∞
4. –ó–∞–ø—Ä–æ—Å—ã –∫ GPT
5. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
6. –í—Å–µ –æ—Ç–≤–µ—Ç—ã –±–æ—Ç–∞
7. –õ—é–±—ã–µ –æ—à–∏–±–∫–∏ —Å –ø–æ–ª–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º

### üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

#### –ü—Ä–æ–±–ª–µ–º–∞: "–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ —Å–µ—Ç–∏, –Ω–æ –±–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç"

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ç–µ–ø–µ—Ä—å –≤–∏–¥–Ω—ã –≤ –ª–æ–≥–∞—Ö:**

1. **–ë–æ—Ç –Ω–µ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è –∏–∑-–∑–∞ –Ω–µ–≤–µ—Ä–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞**
   ```
   ‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞: Unauthorized
   ```

2. **–ë–æ—Ç –∑–∞–ø—É—Å—Ç–∏–ª—Å—è, –Ω–æ polling –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**
   ```
   ‚úÖ HayalKiz Bot —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω
   ‚ùå –û—à–∏–±–∫–∞ –≤–æ –≤—Ä–µ–º—è polling: ...
   ```

3. **–ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –µ—Å—Ç—å –æ—à–∏–±–∫–∏ –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö**
   ```
   üë§ /start –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 123456
   ‚ùå –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ WebApp –¥–∞–Ω–Ω—ã—Ö: ...
   ```

### üì¶ –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã

1. `LOGS_GUIDE.md` - –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø—Ä–æ—Å–º–æ—Ç—Ä—É –ª–æ–≥–æ–≤
2. `QUICK_DEBUG.md` - –ë—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º
3. `CHANGELOG_LOGGING.md` - –≠—Ç–æ—Ç —Ñ–∞–π–ª

### üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

1. **–î–µ–ø–ª–æ–π –Ω–∞ Timeweb.Cloud:**
   ```bash
   # –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ Docker-–æ–±—Ä–∞–∑
   docker build -t hayalkiz-bot .
   
   # –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
   docker run -p 8000:8000 --env-file keys.env hayalkiz-bot
   ```

2. **–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:**
   - –ß–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Timeweb.Cloud
   - –ò–ª–∏ —á–µ—Ä–µ–∑ `docker logs -f <container-id>`

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ health:**
   ```bash
   curl http://your-app:8000/health
   # –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: {"status": "ok", "service": "hayalkiz-bot"}
   ```

### ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **Health-—Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –±–æ—Ç–∞**
   - –ï—Å–ª–∏ –±–æ—Ç —É–ø–∞–ª, health endpoint –≤—Å–µ —Ä–∞–≤–Ω–æ –±—É–¥–µ—Ç –æ—Ç–≤–µ—á–∞—Ç—å
   - –≠—Ç–æ –æ–±—ä—è—Å–Ω—è–µ—Ç, –ø–æ—á–µ–º—É Timeweb.Cloud –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–≤ —Å–µ—Ç–∏", –Ω–æ –±–æ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

2. **–õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏**
   - –í—Å–µ –ª–æ–≥–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ stdout
   - –ú–æ–∂–Ω–æ —Å–º–æ—Ç—Ä–µ—Ç—å –∏—Ö –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Timeweb.Cloud

3. **Stack traces**
   - –í—Å–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å –ø–æ–ª–Ω—ã–º stack trace
   - –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ —Ç–æ—á–Ω—É—é —Å—Ç—Ä–æ–∫—É –∫–æ–¥–∞, –≥–¥–µ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞

### üéì –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

#### –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ—Å—Ç–∏ –ª–æ–≥–æ–≤

–í `start.py` –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å —Å `INFO` –Ω–∞ `DEBUG`:

```python
logging.basicConfig(
    level=logging.DEBUG,  # –ï—â–µ –±–æ–ª—å—à–µ –¥–µ—Ç–∞–ª–µ–π
    ...
)
```

#### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ñ–∞–π–ª (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å file handler:

```python
logging.basicConfig(
    handlers=[
        logging.StreamHandler(sys.stdout),
        logging.FileHandler('/app/data/bot.log')  # –õ–æ–≥–∏ –≤ —Ñ–∞–π–ª
    ]
)
```

### ‚úÖ Checklist –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

- [ ] –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- [ ] –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —É—Å–ø–µ—à–Ω—É—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –±–æ—Ç–∞
- [ ] –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç username –±–æ—Ç–∞
- [ ] –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ `/start` –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ª–æ–≥ —Å ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [ ] Health endpoint –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç OK
- [ ] –ù–µ—Ç —Å—Ç—Ä–æ–∫ —Å ‚ùå –≤ –ª–æ–≥–∞—Ö

–ï—Å–ª–∏ –≤—Å–µ –ø—É–Ω–∫—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã - –±–æ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–µ–Ω! üéâ
